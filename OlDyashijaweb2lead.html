<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>상담 요청 - 성공적인 비즈니스를 위한 첫걸음</title>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />

    <link rel="icon" href="data:;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" />

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Font and base styles */
        body {
            font-family: "Inter", sans-serif;
            background: linear-gradient(135deg, #0b132b, #1c2541, #3a506b);
            overflow-y: auto; /* Enable vertical scroll */
        }

        /* Particle background */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1c2541; }
        ::-webkit-scrollbar-thumb { background: #5bc0be; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #6fffe9; }

        /* Step transition animation */
        .step {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            width: 100%;
        }
        .step.hidden {
            opacity: 0;
            transform: translateY(20px);
            position: absolute; /* Prevent layout shift when hiding */
            pointer-events: none;
        }

        /* Custom radio buttons */
        .custom-radio input[type="radio"] { display: none; }
        .custom-radio label {
            position: relative;
            padding-left: 30px;
            cursor: pointer;
            user-select: none;
        }
        .custom-radio label:before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: 2px solid #5bc0be;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        .custom-radio input[type="radio"]:checked + label:before {
            background-color: #5bc0be;
            border-color: #6fffe9;
        }
        .custom-radio input[type="radio"]:checked + label:after {
            content: '';
            position: absolute;
            left: 6px;
            top: 50%;
            transform: translateY(-50%) scale(1);
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #1c2541;
            transition: transform 0.2s ease;
        }
        .custom-radio input[type="radio"]:not(:checked) + label:after {
            transform: translateY(-50%) scale(0);
        }

        /* Error message styling */
        .error {
            color: #ff6b6b;
            margin-top: 8px;
            font-size: 14px;
            font-weight: 500;
        }
    </style>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js" defer></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js" defer></script>

    <!-- Medallia DXA Script -->
    <link rel="dns-prefetch" href="//cdn.decibelinsight.net" />
    <link rel="dns-prefetch" href="//collection.decibelinsight.net" />
    <script type="text/javascript">
        // <![CDATA[
        (function (d, e, c, i, b, el, it) {
            d._da_ = d._da_ || [];
            _da_.oldErr = d.onerror;
            _da_.err = [];
            d.onerror = function () {
                _da_.err.push(arguments);
                _da_.oldErr && _da_.oldErr.apply(d, Array.prototype.slice.call(arguments));
            };
            d.DecibelInsight = b;
            d[b] = d[b] || function () { (d[b].q = d[b].q || []).push(arguments); };
            (el = e.createElement(c)), (it = e.getElementsByTagName(c)[0]);
            el.async = 1;
            el.src = i;
            it.parentNode.insertBefore(el, it);
        })(window, document, "script", "https://cdn.decibelinsight.net/i/14089/939431/di.js", "decibelInsight");
        // ]]>
    </script>
</head>

<body class="min-h-screen flex items-center justify-center p-4">
<div id="particles-js"></div>

<!-- Form Container -->
<div id="formContainer" class="container bg-gray-900 bg-opacity-50 backdrop-blur-xl border border-blue-400 border-opacity-20 p-8 rounded-2xl shadow-2xl max-w-2xl w-full mx-auto my-8 relative z-10" data-aos="fade-up">
    <div class="text-center mb-8">
        <h1 class="text-4xl font-extrabold text-white mb-2">상담 요청</h1>
        <p class="text-blue-200 text-lg">성공적인 비즈니스를 위한 첫걸음, 저희가 함께합니다.</p>
    </div>

    <!-- Progress Bar -->
    <div class="w-full bg-gray-700 rounded-full h-2.5 mb-10">
        <div id="progressBar" class="bg-gradient-to-r from-cyan-400 to-blue-500 h-2.5 rounded-full transition-all duration-700 ease-out" style="width: 10%"></div>
    </div>

    <div class="relative min-h-[400px]"> <!-- Container for steps, with minimum height -->
        <!-- Step 1: Select Customer Type -->
        <div id="step1" class="step text-center">
            <h2 class="text-2xl font-semibold text-white mb-6">1. 고객 유형을 선택해주세요</h2>
            <div class="flex flex-col md:flex-row justify-center items-center gap-6">
                <button class="group relative w-full md:w-60 h-40 p-6 bg-gray-800 bg-opacity-50 border-2 border-blue-400 border-opacity-30 rounded-xl flex flex-col justify-center items-center text-white hover:border-cyan-400 hover:bg-cyan-900 hover:bg-opacity-40 transition-all duration-300" onclick="selectCategory('개인사업자')">
                    <svg class="w-12 h-12 mb-3 text-cyan-400 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                    <span class="text-xl font-bold">개인사업자</span>
                </button>
                <button class="group relative w-full md:w-60 h-40 p-6 bg-gray-800 bg-opacity-50 border-2 border-blue-400 border-opacity-30 rounded-xl flex flex-col justify-center items-center text-white hover:border-cyan-400 hover:bg-cyan-900 hover:bg-opacity-40 transition-all duration-300" onclick="selectCategory('법인사업자')">
                    <svg class="w-12 h-12 mb-3 text-cyan-400 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1m-1-8h1m-5 8h1m-1-4h1m-1-4h1"></path></svg>
                    <span class="text-xl font-bold">법인사업자</span>
                </button>
            </div>
        </div>

        <!-- Step 2: Select Product of Interest -->
        <div id="step2" class="step hidden text-center">
            <h2 class="text-2xl font-semibold text-white mb-6">2. 관심 있는 제품(유형)을 선택해주세요</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <button class="group p-6 bg-gray-800 bg-opacity-50 border-2 border-blue-400 border-opacity-30 rounded-xl text-white hover:border-cyan-400 hover:bg-cyan-900 hover:bg-opacity-40 transition-all duration-300 h-36 flex items-center justify-center" onclick="selectProduct('프리미엄 호텔')">
                    <span class="text-xl font-bold group-hover:scale-105 transition-transform">프리미엄 호텔</span>
                </button>
                <button class="group p-6 bg-gray-800 bg-opacity-50 border-2 border-blue-400 border-opacity-30 rounded-xl text-white hover:border-cyan-400 hover:bg-cyan-900 hover:bg-opacity-40 transition-all duration-300 h-36 flex items-center justify-center" onclick="selectProduct('부띠크 호텔')">
                    <span class="text-xl font-bold group-hover:scale-105 transition-transform">부띠크 호텔</span>
                </button>
                <button class="group p-6 bg-gray-800 bg-opacity-50 border-2 border-blue-400 border-opacity-30 rounded-xl text-white hover:border-cyan-400 hover:bg-cyan-900 hover:bg-opacity-40 transition-all duration-300 h-36 flex items-center justify-center" onclick="selectProduct('스탠다드 호텔')">
                    <span class="text-xl font-bold group-hover:scale-105 transition-transform">스탠다드 호텔</span>
                </button>
            </div>
        </div>

        <!-- Step 3: Enter Customer Information -->
        <div id="step3" class="step hidden">
            <h2 class="text-2xl font-semibold text-white mb-6 text-center">3. 고객님의 정보를 입력해주세요</h2>
            <div class="form-container max-w-md mx-auto space-y-4">
                <div>
                    <label for="name" class="block text-blue-200 text-sm font-medium mb-2">이름 <span class="text-cyan-400">*</span></label>
                    <input type="text" id="name" class="w-full bg-gray-800 bg-opacity-70 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition" placeholder="이름을 입력해주세요" required>
                    <span id="error-name" class="error" style="display: none"></span>
                </div>
                <div>
                    <label for="company" class="block text-blue-200 text-sm font-medium mb-2">상호명 <span class="text-cyan-400">*</span></label>
                    <input type="text" id="company" class="w-full bg-gray-800 bg-opacity-70 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition" placeholder="상호명을 입력해주세요" required>
                    <span id="error-company" class="error" style="display: none"></span>
                </div>
                <div>
                    <label for="mobile" class="block text-blue-200 text-sm font-medium mb-2">전화번호 <span class="text-cyan-400">*</span></label>
                    <input type="tel" id="mobile" class="w-full bg-gray-800 bg-opacity-70 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition" placeholder="010-1234-5678" required>
                    <span id="error-mobile" class="error" style="display: none"></span>
                </div>
                <div>
                    <label class="block text-blue-200 text-sm font-medium mb-2">사업자 주소 <span class="text-cyan-400">*</span></label>
                    <div class="flex flex-col sm:flex-row gap-2 mb-2">
                        <select id="province" class="w-full sm:w-1/2 bg-gray-800 bg-opacity-70 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition" required>
                            <option value="">--None--</option>
                            <option value="서울특별시">서울특별시</option>
                            <option value="경기도">경기도</option>
                            <option value="충청도">충청도</option>
                            <option value="전라도">전라도</option>
                            <option value="경상도">경상도</option>
                            <option value="강원도">강원도</option>
                        </select>
                        <select id="city" class="w-full sm:w-1/2 bg-gray-800 bg-opacity-70 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition" required>
                            <option value="">--None--</option>
                            <option value="수원시">수원시</option>
                            <option value="용인시">용인시</option>
                            <option value="하남시">하남시</option>
                            <option value="화성시">화성시</option>
                            <option value="광명시">광명시</option>
                            <option value="안양시">안양시</option>
                            <option value="부천시">부천시</option>
                            <option value="고양시">고양시</option>
                            <option value="의정부시">의정부시</option>
                            <option value="양주시">양주시</option>
                            <option value="남양주시">남양주시</option>
                        </select>
                    </div>
                    <span id="error-province" class="error" style="display: none"></span>
                    <span id="error-city" class="error" style="display: none"></span>
                    <input type="text" id="roadAddress" class="w-full bg-gray-800 bg-opacity-70 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition" placeholder="도로명 주소 (예: 처인구 금학로 123번길 45-6)" required>
                    <span id="error-roadAddress" class="error" style="display: none"></span>
                </div>
                <div>
                    <label for="email" class="block text-blue-200 text-sm font-medium mb-2">이메일</label>
                    <input type="email" id="email" class="w-full bg-gray-800 bg-opacity-70 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition" placeholder="이메일 주소 (선택)">
                    <span id="error-email" class="error" style="display: none"></span>
                </div>
                <button class="w-full mt-4 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-bold text-lg rounded-lg shadow-lg hover:shadow-cyan-500/50 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-opacity-75 transition-all duration-300" onclick="validateContactInfoAndGoToNextStep()">
                    다음 단계로
                </button>
            </div>
        </div>

        <!-- Step 4: Enter Business Scale -->
        <div id="step4" class="step hidden">
            <h2 class="text-2xl font-semibold text-white mb-6 text-center">4. 사업 규모를 알려주세요</h2>
            <div class="form-container max-w-md mx-auto space-y-6">
                <div>
                    <label for="annual_revenue" class="block text-blue-200 text-sm font-medium mb-2">(연) 매출 <span class="text-cyan-400">*</span></label>
                    <div class="flex items-center gap-2">
                        <input type="number" id="annual_revenue" step="0.1" class="w-full bg-gray-800 bg-opacity-70 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition" placeholder="예: 5.5" required>
                        <span class="text-white flex-shrink-0">억 원</span>
                    </div>
                    <span id="error-annual_revenue" class="error" style="display: none"></span>
                </div>
                <div>
                    <label for="room_count" class="block text-blue-200 text-sm font-medium mb-2">방(개수) <span class="text-cyan-400">*</span></label>
                    <input type="number" id="room_count" class="w-full bg-gray-800 bg-opacity-70 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition" placeholder="예: 30" required>
                    <span id="error-room_count" class="error" style="display: none"></span>
                </div>
                <button class="w-full mt-4 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-bold text-lg rounded-lg shadow-lg hover:shadow-cyan-500/50 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-opacity-75 transition-all duration-300" onclick="validateBusinessScaleAndGoToNextStep()">
                    다음 단계로
                </button>
            </div>
        </div>

        <!-- Step 5: Additional Information and Consent -->
        <div id="step5" class="step hidden">
            <h2 class="text-2xl font-semibold text-white mb-6 text-center">5. 마지막 단계입니다</h2>
            <div class="form-container max-w-md mx-auto space-y-6">
                <div>
                    <label for="consultationType" class="block text-blue-200 text-sm font-medium mb-2">방문 유형 <span class="text-cyan-400">*</span></label>
                    <select id="consultationType" class="w-full bg-gray-800 bg-opacity-70 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition" required>
                        <option value="">--None--</option>
                        <option value="브랜드 호텔 입점">브랜드 호텔 입점</option>
                        <option value="호텔 운영 솔루션">호텔 운영 솔루션</option>
                        <option value="설계/디자인 상담">설계/디자인 상담</option>
                        <option value="상품/서비스 견적 문의">상품/서비스 견적 문의</option>
                        <option value="호텔쇼/사업설명회 신청">호텔쇼/사업설명회 신청</option>
                        <option value="기타 자유 상담">기타 자유 상담</option>
                    </select>
                    <span id="error-consultationType" class="error" style="display: none"></span>
                </div>
                <div>
                    <label for="siteReferral" class="block text-blue-200 text-sm font-medium mb-2">사이트 유입 경로 <span class="text-cyan-400">*</span></label>
                    <select id="siteReferral" class="w-full bg-gray-800 bg-opacity-70 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition" required>
                        <option value="">--None--</option>
                        <option value="검색">검색</option>
                        <option value="배너 광고">배너 광고</option>
                        <option value="유투브 등 영상">유투브 등 영상</option>
                        <option value="언론매체 (뉴스, 숙박업 소식지 등)">언론매체 (뉴스, 숙박업 소식지 등)</option>
                        <option value="SNS (블로그, 카카오 톡 등)">SNS (블로그, 카카오 톡 등)</option>
                        <option value="지인 추천">지인 추천</option>
                        <option value="기타">기타</option>
                    </select>
                    <span id="error-siteReferral" class="error" style="display: none"></span>
                </div>

                <!-- Consent Section -->
                <div class="space-y-4 text-white">
                    <div class="bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700">
                        <h3 class="font-semibold text-cyan-400">[필수] 개인정보 수집/이용 동의</h3>
                        <div class="flex items-center mt-2 space-x-6 custom-radio">
                            <input type="radio" id="agreeRequired" name="privacyRequired" value="agree" /><label for="agreeRequired">동의함</label>
                            <input type="radio" id="disagreeRequired" name="privacyRequired" value="disagree" /><label for="disagreeRequired">동의하지 않음</label>
                        </div>
                        <span id="error-privacyRequired" class="error" style="display: none"></span>
                    </div>
                    <div class="bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700">
                        <h3 class="font-semibold text-gray-300">[선택] 마케팅 활용 동의</h3>
                        <div class="flex items-center mt-2 space-x-6 custom-radio">
                            <input type="radio" id="agreeOptional" name="privacyOptional" value="agree" /><label for="agreeOptional">동의함</label>
                            <input type="radio" id="disagreeOptional" name="privacyOptional" value="disagree" /><label for="disagreeOptional">동의하지 않음</label>
                        </div>
                    </div>
                    <div class="bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700">
                        <h3 class="font-semibold text-gray-300">[선택] 이메일, 문자를 통한 마케팅 정보 수신 동의</h3>
                        <div class="flex items-center mt-2 space-x-6 custom-radio">
                            <input type="radio" id="agreeMarketing" name="marketingConsent" value="agree" /><label for="agreeMarketing">동의함</label>
                            <input type="radio" id="disagreeMarketing" name="marketingConsent" value="disagree" /><label for="disagreeMarketing">동의하지 않음</label>
                        </div>
                    </div>
                    <div class="bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700">
                        <h3 class="font-semibold text-cyan-400">(필수) 만 14세 이상입니다.</h3>
                        <div class="flex items-center mt-2 space-x-6 custom-radio">
                            <input type="radio" id="ageYes" name="ageConsent" value="yes" /><label for="ageYes">예</label>
                            <input type="radio" id="ageNo" name="ageConsent" value="no" /><label for="ageNo">아니오</label>
                        </div>
                        <span id="error-ageConsent" class="error" style="display: none"></span>
                    </div>
                </div>

                <button id="submittosalesforce" class="w-full mt-4 py-4 bg-gradient-to-r from-green-400 via-cyan-500 to-blue-600 text-white font-extrabold text-xl rounded-lg shadow-lg hover:shadow-cyan-400/50 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-cyan-300 focus:ring-opacity-75 transition-all duration-300" onclick="submitForm()">
                    상담 신청 제출하기
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Thank You Page Container (Initially Hidden) -->
<div id="thankYouContainer" class="hidden container bg-gray-900 bg-opacity-50 backdrop-blur-xl border border-green-400 border-opacity-30 p-8 md:p-12 rounded-2xl shadow-2xl max-w-2xl w-full mx-auto my-8 relative z-10 text-center" data-aos="fade-up">
    <div class="mb-6">
        <svg class="w-20 h-20 mx-auto text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
    </div>
    <h1 class="text-4xl font-extrabold text-white mb-3">제출되었습니다. 감사합니다!</h1>
    <p class="text-blue-200 text-lg mb-8">
        고객님의 상담 요청이 성공적으로 접수되었습니다. <br>담당자가 확인 후 신속하게 연락드리겠습니다.
    </p>

    <div class="bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg p-6 my-8 text-left">
        <h2 class="text-2xl font-semibold text-cyan-400 mb-4">다음 단계 안내</h2>
        <ul class="space-y-3 text-blue-200">
            <li class="flex items-start">
                <svg class="w-6 h-6 text-cyan-400 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                <span><strong>접수 확인:</strong> 영업일 기준 1~2일 이내에 담당자가 배정됩니다.</span>
            </li>
            <li class="flex items-start">
                <svg class="w-6 h-6 text-cyan-400 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                <span><strong>상담 진행:</strong> 입력해주신 연락처로 담당자가 연락하여 상담을 진행합니다.</span>
            </li>
            <li class="flex items-start">
                <svg class="w-6 h-6 text-cyan-400 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                <span><strong>맞춤 제안:</strong> 상담 내용을 바탕으로 고객님께 최적화된 비즈니스 솔루션을 제안해 드립니다.</span>
            </li>
        </ul>
    </div>

    <button
            onclick="window.location.href='https://www.example.com'"
            class="w-full max-w-xs mt-4 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-bold text-lg rounded-lg shadow-lg hover:shadow-cyan-500/50 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-opacity-75 transition-all duration-300"
    >
        메인 페이지로 돌아가기
    </button>
</div>


<!-- Hidden Web-to-Lead Form -->
<form id="hiddenSubmitForm" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&orgId=00DgK000001jAKP" method="POST" style="display: none" data-di-form-track data-di-form-id="JunghoonSample" onsubmit="handleOnSubmit()" target="hiddenFrame">
    <input type="hidden" name="oid" value="00DgK000001jAKP">
    <input type="hidden" name="retURL" value="http://">

    <!-- Debugging Fields: Active for testing -->
    <input type="hidden" name="debug" value="1">
    <input type="hidden" name="debugEmail" value="alex98110658@gmail.com">

    <!-- Standard Fields -->
    <input type="hidden" id="sf_last_name" name="last_name" />
    <input type="hidden" id="sf_email" name="email" />
    <input type="hidden" id="sf_company" name="company" />
    <input type="hidden" id="sf_phone" name="phone" />
    <input type="hidden" id="sf_url" name="url" />
    <input type="hidden" id="sf_title" name="title" />
    <input type="hidden" id="sf_description" name="description" />
    <input type="hidden" id="sf_lead_source" name="lead_source" />
    <input type="hidden" id="sf_revenue" name="revenue" />

    <!-- Custom Fields from new SF form -->
    <input type="hidden" id="sf_city_custom" name="00NgK000015huRl" />
    <input type="hidden" id="sf_province_custom" name="00NgK000015huMv" />
    <input type="hidden" id="sf_product_type_custom" name="00NgK000015ijIz" />
    <input type="hidden" id="sf_street_address_custom" name="00NgK000015huoLUAQ" />
    <input type="hidden" id="sf_consultation_type_custom" name="00NgK000015iYG3" />
    <input type="hidden" id="sf_site_referral_custom" name="00NgK000015ir0P" />
    <input type="hidden" id="sf_privacy_required_custom" name="00NgK000015iukf" />
    <input type="hidden" id="sf_privacy_optional_custom" name="00NgK000015ik3m" />
    <input type="hidden" id="sf_marketing_consent_custom" name="00NgK000015iy1t" />
    <input type="hidden" id="sf_age_consent_custom" name="00NgK000015ijD8" />
    <input type="hidden" id="sf_business_type_custom" name="00NgK000015jH2w" />
    <input type="hidden" id="sf_annual_revenue_custom" name="00NgK000015qT5l" />
    <input type="hidden" id="sf_room_count_custom" name="00NgK000015qTH3" />
</form>

<!-- Hidden iframe to prevent page redirect -->
<iframe name="hiddenFrame" style="display:none;"></iframe>

<script>
    // Object to store user data across steps
    const userData = {};
    let currentStep = 1;
    const totalSteps = 5;
    const steps = document.querySelectorAll('.step');

    // Updates the progress bar based on the current step
    function updateProgressBar() {
        const progress = (currentStep / totalSteps) * 100;
        document.getElementById("progressBar").style.width = `${progress}%`;
    }

    // Hides the current step and shows the next one
    function goToNextStep(nextStepNumber) {
        const currentStepId = `step${currentStep}`;
        const nextStepId = `step${nextStepNumber}`;

        const currentStepEl = document.getElementById(currentStepId);
        const nextStepEl = document.getElementById(nextStepId);

        if (currentStepEl) {
            currentStepEl.classList.add('hidden');
        }
        if (nextStepEl) {
            nextStepEl.classList.remove('hidden');
        }

        currentStep = nextStepNumber;
        updateProgressBar();
    }

    // Saves category and moves to the next step
    function selectCategory(category) {
        userData.category = category;
        goToNextStep(2);
    }

    // Saves product and moves to the next step
    function selectProduct(product) {
        userData.product = product;
        goToNextStep(3);
    }

    // Validates contact information before proceeding
    function validateContactInfoAndGoToNextStep() {
        let hasError = false;
        const fields = [
            { id: 'name', errorId: 'error-name', message: '이름을 입력해주세요.' },
            { id: 'company', errorId: 'error-company', message: '상호명을 입력해주세요.' },
            { id: 'mobile', errorId: 'error-mobile', message: '전화번호를 입력해주세요.' },
            { id: 'province', errorId: 'error-province', message: '시/도를 선택해주세요.' },
            { id: 'city', errorId: 'error-city', message: '시/군을 선택해주세요.' },
            { id: 'roadAddress', errorId: 'error-roadAddress', message: '도로명 주소를 입력해주세요.' },
        ];

        fields.forEach(field => {
            const el = document.getElementById(field.id);
            const errorEl = document.getElementById(field.errorId);
            if (!el.value.trim()) {
                errorEl.textContent = field.message;
                errorEl.style.display = 'block';
                el.classList.add('border-red-500');
                hasError = true;
            } else {
                errorEl.style.display = 'none';
                el.classList.remove('border-red-500');
            }
        });

        // Validate optional email field only if it's not empty
        const emailEl = document.getElementById('email');
        const errorEmailEl = document.getElementById('error-email');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (emailEl.value.trim() && !emailRegex.test(emailEl.value.trim())) {
            errorEmailEl.textContent = '유효한 이메일 주소를 입력해주세요.';
            errorEmailEl.style.display = 'block';
            emailEl.classList.add('border-red-500');
            hasError = true;
        } else {
            errorEmailEl.style.display = 'none';
            emailEl.classList.remove('border-red-500');
        }

        if (hasError) {
            if (typeof decibelInsight === "function") {
                decibelInsight("sendApplicationError", "validation error - contact info");
            }
            return;
        }

        // Save valid data
        userData.name = document.getElementById("name").value.trim();
        userData.company = document.getElementById("company").value.trim();
        userData.mobile = document.getElementById("mobile").value.trim();
        userData.province = document.getElementById("province").value;
        userData.city = document.getElementById("city").value;
        userData.address = document.getElementById("roadAddress").value.trim();
        userData.email = document.getElementById("email").value.trim();

        goToNextStep(4);
    }

    // Validates business scale information before proceeding
    function validateBusinessScaleAndGoToNextStep() {
        let hasError = false;

        const revenueEl = document.getElementById('annual_revenue');
        const errorRevenueEl = document.getElementById('error-annual_revenue');
        const revenueValue = parseFloat(revenueEl.value);

        if (!revenueEl.value.trim() || isNaN(revenueValue) || revenueValue <= 0) {
            errorRevenueEl.textContent = '올바른 연 매출을 입력해주세요. (예: 5.5)';
            errorRevenueEl.style.display = 'block';
            revenueEl.classList.add('border-red-500');
            hasError = true;
        } else {
            errorRevenueEl.style.display = 'none';
            revenueEl.classList.remove('border-red-500');
        }

        const roomCountEl = document.getElementById('room_count');
        const errorRoomCountEl = document.getElementById('error-room_count');
        if (!roomCountEl.value.trim() || parseInt(roomCountEl.value) <= 0) {
            errorRoomCountEl.textContent = '올바른 객실 수를 입력해주세요.';
            errorRoomCountEl.style.display = 'block';
            roomCountEl.classList.add('border-red-500');
            hasError = true;
        } else {
            errorRoomCountEl.style.display = 'none';
            roomCountEl.classList.remove('border-red-500');
        }

        if (hasError) return;

        // Save calculated revenue and room count
        userData.annualRevenue = revenueValue * 100000000;
        userData.roomCount = roomCountEl.value.trim();

        goToNextStep(5);
    }


    // Validates the final step and submits the form
    function submitForm() {
        let hasError = false;
        const finalFields = [
            { id: 'consultationType', errorId: 'error-consultationType', message: '상담 유형을 선택해주세요.' },
            { id: 'siteReferral', errorId: 'error-siteReferral', message: '사이트 유입 경로를 선택해주세요.' },
        ];

        finalFields.forEach(field => {
            const el = document.getElementById(field.id);
            const errorEl = document.getElementById(field.errorId);
            if (!el.value) {
                errorEl.textContent = field.message;
                errorEl.style.display = 'block';
                el.classList.add('border-red-500');
                hasError = true;
            } else {
                errorEl.style.display = 'none';
                el.classList.remove('border-red-500');
            }
        });

        // Validate required consent
        const agreeRequiredEl = document.querySelector('input[name="privacyRequired"]:checked');
        if (!agreeRequiredEl || agreeRequiredEl.value !== 'agree') {
            document.getElementById("error-privacyRequired").textContent = "필수 개인정보 수집/이용에 동의해주세요.";
            document.getElementById("error-privacyRequired").style.display = "block";
            hasError = true;
        } else {
            document.getElementById("error-privacyRequired").style.display = "none";
        }

        // Validate age consent
        const ageConsentEl = document.querySelector('input[name="ageConsent"]:checked');
        if (!ageConsentEl || ageConsentEl.value !== 'yes') {
            document.getElementById("error-ageConsent").textContent = "만 14세 이상임에 동의가 필요합니다.";
            document.getElementById("error-ageConsent").style.display = "block";
            hasError = true;
        } else {
            document.getElementById("error-ageConsent").style.display = "none";
        }

        if (hasError) {
            if (typeof decibelInsight === "function") {
                decibelInsight("sendApplicationError", "validation error - final step");
            }
            return;
        }

        // Populate hidden standard form fields
        document.getElementById("sf_last_name").value = userData.name || "";
        document.getElementById("sf_company").value = userData.company || "";
        document.getElementById("sf_phone").value = userData.mobile || "";
        document.getElementById("sf_email").value = userData.email || "";
        document.getElementById("sf_url").value = window.location.href;
        document.getElementById("sf_revenue").value = userData.annualRevenue || "";
        document.getElementById("sf_title").value = userData.product || "";
        document.getElementById("sf_description").value = `상담 요청: ${userData.product}`;
        document.getElementById("sf_lead_source").value = "Web";

        // Populate hidden custom form fields
        document.getElementById("sf_province_custom").value = userData.province || "";
        document.getElementById("sf_city_custom").value = userData.city || "";
        document.getElementById("sf_street_address_custom").value = userData.address || "";
        document.getElementById("sf_business_type_custom").value = userData.category || "";
        document.getElementById("sf_product_type_custom").value = userData.product || "";
        document.getElementById("sf_annual_revenue_custom").value = userData.annualRevenue || "";
        document.getElementById("sf_room_count_custom").value = userData.roomCount || "";
        document.getElementById("sf_consultation_type_custom").value = document.getElementById("consultationType").value;
        document.getElementById("sf_site_referral_custom").value = document.getElementById("siteReferral").value;

        // Get consent values
        const privacyRequired = document.querySelector('input[name="privacyRequired"]:checked')?.value;
        const privacyOptional = document.querySelector('input[name="privacyOptional"]:checked')?.value;
        const marketingConsent = document.querySelector('input[name="marketingConsent"]:checked')?.value;
        const ageConsent = document.querySelector('input[name="ageConsent"]:checked')?.value;

        // Set consent values in hidden form (1 for agree/yes, 0 for disagree/no)
        document.getElementById("sf_privacy_required_custom").value = privacyRequired === 'agree' ? '1' : '0';
        document.getElementById("sf_privacy_optional_custom").value = privacyOptional === 'agree' ? '1' : '0';
        document.getElementById("sf_marketing_consent_custom").value = marketingConsent === 'agree' ? '1' : '0';
        document.getElementById("sf_age_consent_custom").value = ageConsent === 'yes' ? '1' : '0';

        // Submit the hidden form
        document.getElementById("hiddenSubmitForm").submit();

        // Hide form and show thank you message
        document.getElementById('formContainer').style.display = 'none';
        document.getElementById('thankYouContainer').classList.remove('hidden');
    }

    // Function to handle form submission for tracking
    function handleOnSubmit() {
        if (typeof decibelInsight === "function") {
            decibelInsight("formSubmitted", "#hiddenSubmitForm");
            decibelInsight("sendTrackedEvent", "JunghoonSample");
        }
    }

    // Runs when the DOM is fully loaded
    document.addEventListener("DOMContentLoaded", function () {
        AOS.init({ duration: 800, once: true });

        updateProgressBar();

        // Auto-formats the mobile number input
        const mobileInput = document.getElementById('mobile');
        mobileInput.addEventListener('input', (e) => {
            let value = e.target.value.replace(/\D/g, ''); // Remove non-digits
            const len = value.length;

            if (len <= 3) {
                e.target.value = value;
            } else if (len <= 7) {
                e.target.value = `${value.slice(0, 3)}-${value.slice(3)}`;
            } else {
                e.target.value = `${value.slice(0, 3)}-${value.slice(3, 7)}-${value.slice(7, 11)}`;
            }
        });

        // Initialize particles.js background
        particlesJS("particles-js", {
            particles: {
                number: { value: 80, density: { enable: true, value_area: 800 } },
                color: { value: "#5bc0be" },
                shape: { type: "circle" },
                opacity: { value: 0.5, random: true, anim: { enable: true, speed: 1, opacity_min: 0.1, sync: false } },
                size: { value: 3, random: true, anim: { enable: false } },
                line_linked: { enable: true, distance: 150, color: "#3a506b", opacity: 0.4, width: 1 },
                move: { enable: true, speed: 2, direction: "none", random: false, straight: false, out_mode: "out", bounce: false }
            },
            interactivity: {
                detect_on: "canvas",
                events: { onhover: { enable: true, mode: "grab" }, onclick: { enable: true, mode: "push" }, resize: true },
                modes: { grab: { distance: 140, line_linked: { opacity: 1 } }, push: { particles_nb: 4 } }
            },
            retina_detect: true
        });
    });
</script>
</body>
</html>
